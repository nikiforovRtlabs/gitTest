<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-1.0"
      xmlns:ctrl="http://n2oapp.net/framework/config/schema/n2o-control-1.0"
      xmlns:wgt="http://n2oapp.net/framework/config/schema/n2o-widget-2.0"
      xmlns:fs="http://n2oapp.net/framework/config/schema/fieldset-2.0"
      xmlns:rc="http://atria.cz/app/config/schema/rmis-control-1.0">
    <!--<id>perinatal_death_form</id>-->
    <name>Свидетельство о перинатальной смерти</name>
    <object-id>perinatal_death_certificate</object-id>
    <layout>n2o/layout/top-bottom</layout>
    <modal-width>985px</modal-width>
    <regions >
        <region place="top" type="tabs">
            <container id="perinatal" place="top" opened="true">
                <wgt:form src="ext/css/perinatal_death_form.page" customize="css" css-class="perinatal-death-form n2o-form">
                    <wgt:name>Свидетельство о перинатальной смерти</wgt:name>
                    <wgt:query-id>perinatal_death_certificate</wgt:query-id>

                    <!--<wgt:edit after-submit="edit" refresh-after-submit="false" create-more="false"-->
                              <!--condition="(typeof $action !='undefined')&amp;&amp;($action != null)">-->
                        <!--<wgt:invoke-action action-id="{$action}"/>-->
                    <!--</wgt:edit>-->

                    <fs:field-set>
                        <ctrl:hidden id="$action" default-value="create">
                            <ctrl:set-value-expression on="id" on-load="true">
                                if ((typeof id != 'undefined')&amp;&amp;(id != null)) 'update'; else throw '111';
                            </ctrl:set-value-expression>
                        </ctrl:hidden>
                    </fs:field-set>

                    <fs:field-set field-label-location="left" header="none" css-class="perinatal-death-form-banner">
                        <fs:row>
                            <ctrl:masked-input id="code" label="СЕРИЯ" mask="?99999" required="true"
                                               control-style="width:50px;margin-left:25px;" label-style="width:55px;font-weight:bold;margin-left:30px;"
                                               copied="false">
                                <ctrl:properties>
                                    <ctrl:property key="floppy" value="true"/>
                                </ctrl:properties>
                                <ctrl:dependencies>
                                    <ctrl:enabling-condition on="id">
                                        (typeof id == 'undefined')||(id == null)
                                    </ctrl:enabling-condition>
                                </ctrl:dependencies>
                            </ctrl:masked-input>
                            <ctrl:masked-input id="number" label="№" required="true" mask="?9999999999999999999999999"
                                               control-style="width:195px;margin-left:25px;" label-style="width:25px;font-weight: bold;"
                                               copied="false">
                                <ctrl:validations>
                                    <ctrl:validation ref-id="pdCertif_unique" side="client,server"/>
                                </ctrl:validations>
                                <ctrl:dependencies>
                                    <ctrl:enabling-condition on="id">
                                        (typeof id == 'undefined')||(id == null)
                                    </ctrl:enabling-condition>
                                </ctrl:dependencies>
                            </ctrl:masked-input>
                            <ctrl:date-time id="issue_date" label="Дата выдачи" control-style="width:125px;" label-style="width:85px;"
                                            default-value="today()">
                                <ctrl:dependencies>
                                    <ctrl:required-condition>
                                        ((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false))
                                    </ctrl:required-condition>
                                </ctrl:dependencies>
                            </ctrl:date-time>
                        </fs:row>
                        <fs:row>
                            <ctrl:hidden id="par_kind" copied="false"/>
                            <ctrl:hidden id="kind.id" copied="false">
                                <ctrl:set-value-expression on="par_kind" on-load="true" on-non-empty="true">
                                    if ((typeof par_kind != 'undefined')&amp;&amp; (par_kind != null)&amp;&amp; (par_kind == 1)) 4;
                                    else if ((typeof par_kind != 'undefined')&amp;&amp; (par_kind != null)&amp;&amp; (par_kind == 2)) 3; else throw '!';
                                </ctrl:set-value-expression>
                            </ctrl:hidden>
                            <ctrl:radio-group id="kind" label="" inline="true" copied="false"
                                              control-style="width:650px;margin-left:30px;" label-style="display:none;">
                                <ctrl:query query-id="certificate_kind" value-field-id="id" label-field-id="name"/>
                            </ctrl:radio-group>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="parent_instead" label="Выберите исходное Свидетельство взамен которого" copied="false"
                                             control-style="width:215px;" label-style="width:343px;font-weight:bold;margin-left:40px;"
                                             dependency-condition="(typeof kind != 'undefined')&amp;&amp;(kind != null)&amp;&amp;(kind.id != null)&amp;&amp;(kind.id != 1)&amp;&amp; (kind.id != 2)&amp;&amp; ((typeof parent_code == 'undefined')||(parent_code == null))">
                                <ctrl:query query-id="perinatal_death_certificate" value-field-id="id" label-field-id="certificate"/>
                                <ctrl:dependencies>
                                    <ctrl:required-condition on="kind">
                                        (typeof kind != 'undefined')&amp;&amp;(kind != null)&amp;&amp;(kind.id != null)&amp;&amp;(kind.id != 1)&amp;&amp; (kind.id != 2)
                                    </ctrl:required-condition>
                                </ctrl:dependencies>
                                <ctrl:update-model query-id="parentPerDeathUpdModel" master-field-id="parent_instead.id" detail-field-id="cert.id" target="form"/>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="parent" copied="false" visible="false">
                                <ctrl:query query-id="death_certificate" value-field-id="id" label-field-id="certificate"/>
                            </ctrl:classifier>
                            <ctrl:masked-input id="parent_code" label="серия" mask="?99999" readonly="true" copied="false"
                                               control-style="width:50px;" label-style="width:35px;margin-left:100px;"/>
                            <ctrl:masked-input id="parent_number" label="№" mask="?9999999999999999999999999" readonly="true" copied="false"
                                               control-style="width:190px;margin-left:5px;" label-style="width:15px;"/>
                            <ctrl:date-time id="parent_dt" label="" format="DD.MM.YYYY" readonly="true" copied="false"
                                            control-style="width:120px;" label-style="width:0px;"/>
                        </fs:row>
                    </fs:field-set>
                    <fs:field-set header="none" field-label-location="left" css-class="perinatal-death-form-notes">
                        <ctrl:checkbox id="is_duplicate" label="ДУБЛИКАТ" readonly="true" css-class="perinatal-death-check-box"
                                       copied="false"
                                       control-style="width:100px;color:blue;margin-bottom:-12px;" label-style="width:0px;"/>
                        <ctrl:checkbox id="is_mamwords" label="со слов матери" css-class="perinatal-death-check-box"
                                       copied="false"
                                       control-style="width:100px;color:green;margin-bottom:-12px;" label-style="width:0px;"/>
                        <ctrl:checkbox id="is_faulty" label="испорчено" copied="false"
                                       control-style="width:100px;;color:crimson;margin-bottom:-5px;" label-style="width:0px;"
                                       css-class="perinatal-death-check-box"/>
                    </fs:field-set>
                    <fs:field-set header="line" css-class="perinatal-death-form-DopInfo"
                                  depends-on="is_enabling">
                        <fs:row>
                            <ctrl:date-time id="death_child_birth_dt" label="1. Роды мертвым плодом:" format="DD.MM.YYYY HH:mm"
                                            control-style="width:158px;" label-style="width:160px;">
                                <!--<ctrl:dependencies>-->
                                    <!--<ctrl:required-condition>-->
                                        <!--((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false))-->
                                    <!--</ctrl:required-condition>-->
                                <!--</ctrl:dependencies>-->
                            </ctrl:date-time>
                            <ctrl:date-time id="child_birth_dt" label="2. Ребенок родился живым:" format="DD.MM.YYYY HH:mm"
                                            control-style="width:158px;" label-style="width:175px;">
                                <!--<ctrl:dependencies>-->
                                    <!--<ctrl:required-condition>-->
                                        <!--((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false))-->
                                    <!--</ctrl:required-condition>-->
                                <!--</ctrl:dependencies>-->
                            </ctrl:date-time>
                            <ctrl:date-time id="death_dt" label="и умер:" format="DD.MM.YYYY HH:mm"
                                            control-style="width:158px;" label-style="width:65px;">
                                <!--<ctrl:dependencies>-->
                                    <!--<ctrl:required-condition>-->
                                        <!--((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false))-->
                                    <!--</ctrl:required-condition>-->
                                <!--</ctrl:dependencies>-->
                            </ctrl:date-time>
                        </fs:row>
                        <fs:row>
                            <ctrl:radio-group id="death_moment" label="3. Смерть наступила:" inline="true"
                                              control-style="width:700px;" label-style="width:131px;">
                                <ctrl:query query-id="death_moment" value-field-id="id" label-field-id="name"/>
                            </ctrl:radio-group>
                        </fs:row>
                    </fs:field-set>
                    <fs:field-set header="line" label="МАТЬ" field-label-location="left" css-class="perinatal-death-form-mather"
                                  depends-on="is_enabling">
                        <fs:row>
                            <ctrl:classifier id="indiv" label="4. Мать" control-style="width:329px;" label-style="width:46px;"
                                             autoselect-alone="true" search-as-you-type="true">
                                <ctrl:query query-id="patientsSearch" value-field-id="id" label-field-id="displayName">
                                    <ctrl:pre-filters>
                                        <ctrl:pre-filter field-id="genderId" value="2"/>
                                    </ctrl:pre-filters>
                                </ctrl:query>
                                <ctrl:show-modal page-id="patientsList" result-container-id="pats" width="42%"/>
                                <ctrl:actions>
                                    <ctrl:button icon="icon-plus" type="icon" label="Создать">
                                        <ctrl:a href="/pats/patients/new?backUrl=%2Fpats%2Fresource%2F0%2Fhtml%2Fself-close.html" target="newWindow"/>
                                    </ctrl:button>
                                    <ctrl:button icon="icon-pencil" type="icon" label="Редактировать">
                                        <ctrl:a href="/pats/patients/:indiv.id:/edit?backUrl=%2Fpats%2Fresource%2F0%2Fhtml%2Fself-close.html" target="newWindow"/>
                                        <ctrl:dependencies>
                                            <ctrl:enabling-condition>indiv.id != null</ctrl:enabling-condition>
                                        </ctrl:dependencies>
                                    </ctrl:button>
                                </ctrl:actions>
                                <ctrl:update-model query-id="mamInfo_updModel" master-field-id="indiv.id" detail-field-id="ind.id" target="form"/>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="fio" label="Фамилия, имя, отчество" control-style="width:305px;" label-style="width:150px;">
                            </ctrl:input-text>
                        </fs:row>
                        <fs:row>
                            <ctrl:date-time id="mathers_bdt" label="5. Дата рождения:" format="DD.MM.YYYY" control-style="width:120px;" label-style="width:111px;"/>
                        </fs:row>
                        <fs:row>
                            <ctrl:hidden id="maddr.id" default-value="#{addr_parent}"/>
                            <rc:address id="maddr" label="6. Место постоянного жительства (регистрации)" control-style="width:298px;" label-style="width:157px;">
                                <rc:set-value-expression on="maddress.id">
                                    if ((typeof maddress.id != 'undefined')&amp;&amp;(maddress.id != null)) maddress; else throw '!';
                                </rc:set-value-expression>
                            </rc:address>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="ad" autoselect-alone="true" visible="false">
                                <ctrl:query query-id="addr_hidden" value-field-id="id" label-field-id="name"/>
                                <ctrl:set-value-expression on="maddr">maddr</ctrl:set-value-expression>
                                <ctrl:update-model query-id="mamaddr_updModel" master-field-id="ad.id" detail-field-id="mad.id" target="form"/>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="region" label="Республика, край, область" control-style="width:370px;" label-style="width:85px;">
                                <!--<ctrl:set-value-expression on="is_faulty" on-load="false" on-non-empty="true" on-invisible="true">-->
                                    <!--if  ((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false)) throw '!'; else null;-->
                                <!--</ctrl:set-value-expression>-->
                            </ctrl:input-text>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="district" label="Район" control-style="width:415px;" label-style="width:40px;">
                                <!--<ctrl:set-value-expression on="is_faulty" on-load="false" on-non-empty="true" on-invisible="true">-->
                                    <!--if  ((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false)) throw '!'; else null;-->
                                <!--</ctrl:set-value-expression>-->
                            </ctrl:input-text>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="city" label="Город (село)" control-style="width:375px;" label-style="width:80px;">
                                <!--<ctrl:set-value-expression on="is_faulty" on-load="false" on-non-empty="true" on-invisible="true">-->
                                    <!--if  ((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false)) throw '!'; else null;-->
                                <!--</ctrl:set-value-expression>-->
                            </ctrl:input-text>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="street" label="Улица" control-style="width:250px;" label-style="width:40px;"/>
                            <ctrl:input-text id="home" label="дом" control-style="width:45px;margin-left: 5px;" label-style="width:25px;"/>
                            <ctrl:input-text id="apartment" label="кв." control-style="width:45px;margin-left: 5px;" label-style="width:20px;"/>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="mcitiship" label="7. Местность:" control-style="width:371px;" label-style="width:84px;"
                                    autoselect-alone="true">
                                <ctrl:query query-id="citizenship" value-field-id="id" label-field-id="name"/>
                                <!--<ctrl:set-value-expression on="is_faulty" on-load="false" on-non-empty="true" on-invisible="true">-->
                                    <!--if  ((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false)) throw '!'; else null;-->
                                <!--</ctrl:set-value-expression>-->
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="marital_status" label="8. Семейное положение:" control-style="width:380px;" label-style="width:75px;">
                                <ctrl:query query-id="cerf_maritalStatus" value-field-id="id" label-field-id="name"/>
                                <ctrl:dependencies>
                                    <ctrl:required-condition>
                                        ((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false))
                                    </ctrl:required-condition>
                                </ctrl:dependencies>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="education" label="9. Образование:" control-style="width:357px;" label-style="width:98px;">
                                <ctrl:query query-id="education" value-field-id="id" label-field-id="name"/>
                                <ctrl:dependencies>
                                    <ctrl:required-condition>
                                        ((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false))
                                    </ctrl:required-condition>
                                </ctrl:dependencies>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="busyness" label="10. Занятость:"
                                             control-style="width:367px;" label-style="width:88px;">
                                <ctrl:query query-id="busyness" value-field-id="id" label-field-id="name"/>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:masked-input id="childbirth_order" mask="?99" label="11. Которые по счету роды"
                                               control-style="width:30px;" label-style="width:318px;margin-right:107px;"/>
                        </fs:row>
                    </fs:field-set>
                    <fs:field-set header="line" label="РЕБЕНОК" css-class="perinatal-death-form-child" field-label-location="left"
                                  depends-on="is_enabling">
                        <fs:row>
                            <ctrl:radio-group id="gender" label="16. Пол" control-style="margin-right: 25px;" label-style="width:46px;margin-right:25px;" inline="true">
                                <ctrl:query query-id="certif_gender" value-field-id="id" label-field-id="name"/>
                                <ctrl:dependencies>
                                    <ctrl:required-condition>
                                        ((typeof is_faulty == 'undefined')||(is_faulty == null)||(is_faulty == false))
                                    </ctrl:required-condition>
                                </ctrl:dependencies>
                            </ctrl:radio-group>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="child_surname" label="12. Фамилия ребенка" control-style="width:311px;" label-style="width:129px;">
                                <ctrl:set-value-expression on="indiv,fio" on-load="false" on-non-empty="true">
                                    if ((typeof indiv != 'undefined')&amp;&amp;(indiv != null)&amp;&amp;(indiv.id != null)) (indiv.surname);
                                        else
                                            if ((typeof fio != 'undefined')&amp;&amp;(fio != null)) (fio.split(' ', 1).toString());
                                                else throw '!'
                                </ctrl:set-value-expression>
                            </ctrl:input-text>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="death_place" label="15.Смерть (мертворождение) произошла(о):"
                                             control-style="width:174px;" label-style="width:266px;">
                                <ctrl:query query-id="birth_place" value-field-id="id" label-field-id="name"/>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:hidden id="org.addr" default-value="#{org.addr}" visible="false"/>
                            <ctrl:hidden id="org.addrname" default-value="#{org.addrname}" visible="false"/>
                            <rc:address id="death_address" label="13. Место смерти (мертворождения):"
                                        control-style="width:332px;" label-style="width:107px;">
                                <rc:set-value-expression on="death_place,org.addr,org.addrname" on-load="false" on-non-empty="true">
                                    if ((typeof death_place == 'undefined')||(death_place == null)||(death_place.id == null)) throw '!';
                                        else
                                            if (death_place.id == 1)
                                                {
                                                 var o = new Object();
                                                 o.id = org.addr;
                                                 o.displayName = org.addrname;
                                                 o;
                                                }
                                                else
                                                    if (death_place.id == 2) maddr
                                                        else null;
                                </rc:set-value-expression>
                                <rc:dependencies>
                                    <rc:enabling-condition>
                                        death_place.id != 4
                                    </rc:enabling-condition>
                                </rc:dependencies>
                            </rc:address>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="deathad" autoselect-alone="true" visible="false">
                                <ctrl:query query-id="addr_hidden" value-field-id="id" label-field-id="displayName"/>
                                <ctrl:set-value-expression on="death_place,death_address" on-non-empty="true">death_address</ctrl:set-value-expression>
                                <ctrl:update-model query-id="Death_addr_updModel" master-field-id="deathad.id" detail-field-id="dadr.id" target="form"/>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="death_region" label="Республика, край, область" control-style="width:356px;" label-style="width:84px;">
                                <ctrl:set-value-expression on="death_place,death_address,region">
                                    if ((death_place.ecode == '2')&amp;&amp;((typeof death_address == 'undefined')||(death_address == null)||(death_address.id == null)))
                                        region; else null;
                                </ctrl:set-value-expression>
                                <ctrl:dependencies>
                                    <ctrl:enabling-condition>
                                        death_place.id != 4
                                    </ctrl:enabling-condition>
                                </ctrl:dependencies>
                            </ctrl:input-text>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="death_district" label="Район" control-style="width:400px;" label-style="width:40px;">
                                <ctrl:set-value-expression on="death_place,death_address,district">
                                    if ((death_place.ecode == '2')&amp;&amp;((typeof death_address == 'undefined')||(death_address == null)||(death_address.id == null)))
                                        district; else null;
                                </ctrl:set-value-expression>
                                <ctrl:dependencies>
                                    <ctrl:enabling-condition>
                                        death_place.id != 4
                                    </ctrl:enabling-condition>
                                </ctrl:dependencies>
                            </ctrl:input-text>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="death_city" label="Город (село)" control-style="width:363px;" label-style="width:77px;">
                                <ctrl:set-value-expression on="death_place,death_address,city">
                                    if ((death_place.ecode == '2')&amp;&amp;((typeof death_address == 'undefined')||(death_address == null)||(death_address.id == null)))
                                        city; else null;
                                </ctrl:set-value-expression>
                                <ctrl:dependencies>
                                    <ctrl:enabling-condition>
                                        death_place.id != 4
                                    </ctrl:enabling-condition>
                                </ctrl:dependencies>
                            </ctrl:input-text>
                        </fs:row>
                        <fs:row>
                            <ctrl:classifier id="death_citiship" label="14. Местность:" control-style="width:349px;" label-style="width:91px;">
                                <ctrl:query query-id="citizenship" value-field-id="id" label-field-id="name"/>
                                <ctrl:set-value-expression on="death_place,death_address,mcitiship">
                                    if ((death_place.ecode == '2')&amp;&amp;((typeof death_address == 'undefined')||(death_address == null)||(death_address.id == null)))
                                        mcitiship; else null;
                                </ctrl:set-value-expression>
                                <ctrl:dependencies>
                                    <ctrl:enabling-condition>
                                        death_place.id != 4
                                    </ctrl:enabling-condition>
                                </ctrl:dependencies>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:masked-input id="weight" label="17. Масса тела ребенка(плода) при рождении" mask="?9999"
                                               control-style="width:42px;" label-style="width:278px;margin-right:110px;"/>
                            <ctrl:output-text id="gr" label="г" control-style="display:none;" label-style="width:5px;margin-left:-5px;"/>
                        </fs:row>
                        <fs:row>
                            <ctrl:masked-input id="height" label="18. Длина тела ребенка(плода) при рождении" mask="?99"
                                               control-style="width:29px;" label-style="width:277px;;margin-right: 114px;"/>
                            <ctrl:output-text id="sm" label="см" control-style="display:none;" label-style="width:15px;margin-left:-5px;"/>
                        </fs:row>
                        <fs:row>
                            <ctrl:output-text id="child" label="19. Мертворождение или живорождение произошло:" control-style="display:none;"
                                              label-style="width:319px;"/>
                        </fs:row>
                        <fs:row>
                            <ctrl:output-text id="is_singl" label="при одноплодных родах"
                                              control-style="display:none;" label-style="width:150px;margin-left:50px;margin-right:215px;margin-top:-10px;"/>
                            <ctrl:checkbox id="is_singleton" label="" control-style="width:15px;margin-top:-15px;" label-style="display:none;"/>
                        </fs:row>
                        <fs:row>
                            <ctrl:masked-input id="birth_order" label="при многоплодных родах: которым по счету" mask="?9"
                                             control-style="width:25px;margin-top:-10px;" label-style="width:270px;margin-left:50px;margin-right:95px;margin-top:-10px;">
                                <ctrl:dependencies>
                                    <ctrl:enabling-condition>
                                        ((typeof is_singleton == 'undefined')||(is_singleton == null)||(is_singleton != true))
                                    </ctrl:enabling-condition>
                                    <ctrl:required-condition>
                                        (is_faulty != true)&amp;&amp;(is_singleton != true)
                                    </ctrl:required-condition>
                                </ctrl:dependencies>
                            </ctrl:masked-input>
                        </fs:row>
                        <fs:row>
                            <ctrl:masked-input id="sum" label="число детей родившихся (живыми и мертвыми)" mask="?9"
                                               control-style="width:25px;" label-style="width:289px;margin-left:50px;margin-right:76px;">
                                <ctrl:dependencies>
                                    <ctrl:enabling-condition>
                                        ((typeof is_singleton == 'undefined')||(is_singleton == null)||(is_singleton != true))
                                    </ctrl:enabling-condition>
                                    <ctrl:required-condition>
                                        (is_faulty != true)&amp;&amp;(is_singleton != true)
                                    </ctrl:required-condition>
                                </ctrl:dependencies>
                            </ctrl:masked-input>
                        </fs:row>
                    </fs:field-set>

                    <fs:field-set header="none" css-class="perinatal-death-form-DopInfo"
                                  depends-on="is_enabling">
                        <fs:row>
                            <ctrl:masked-input id="general_order" mask="?99" label="20. Которым по счету ребенок был рожден у матери (считая умерших и не считая мертворожденных)"
                                               control-style="width:30px;" label-style="width:318px;margin-right:107px;"/>
                            <ctrl:classifier id="death_kind" label="21. Смерть ребенка (плода) произошла:"
                                             control-style="width:319px;" label-style="width:127px;">
                                <ctrl:query query-id="death_kind" value-field-id="id" label-field-id="name">
                                    <ctrl:pre-filters>
                                        <ctrl:pre-filter field-id="is_perinatal" value="true"/>
                                    </ctrl:pre-filters>
                                </ctrl:query>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:radio-group id="took_birth" label="22. Лицо принимавшее роды:" inline="true"
                                              control-style="width:425px" label-style="width:181px;">
                                <ctrl:query query-id="took_birth" value-field-id="id" label-field-id="name"/>
                            </ctrl:radio-group>
                        </fs:row>
                    </fs:field-set>
                    <fs:field-set ref-id="perinatal_death_reason" dependency-condition="to_read == true"
                                  depends-on="is_enabling"/>

                    <fs:field-set header="none" depends-on="is_enabling">
                        <fs:row>
                            <ctrl:classifier id="establish_cause" label="24. Причины смерти установлены:"
                                             control-style="width:300px;margin-left:1px;" label-style="width:209px;">
                                <ctrl:query query-id="establish_cause" value-field-id="id" label-field-id="name">
                                    <ctrl:pre-filters>
                                        <ctrl:pre-filter field-id="is_perinatal" value="true"/>
                                    </ctrl:pre-filters>
                                </ctrl:query>
                            </ctrl:classifier>
                            <ctrl:classifier id="definition_grounds" label="на основании:"
                                             control-style="width:335px;margin-left:1px;" label-style="width:85px;">
                                <ctrl:query query-id="definition_grounds" value-field-id="id" label-field-id="name"/>
                            </ctrl:classifier>
                        </fs:row>
                    </fs:field-set>

                    <fs:field-set header="none">
                        <fs:row>
                            <ctrl:classifier id="recipient" label="Получатель" autoselect-alone="true" search-as-you-type="true"
                                             control-style="width:840px;margin-top:7px;" label-style="width:85px;margin-rigth:15px;margin-top:7px;">
                                <ctrl:query query-id="patientsSearch" value-field-id="id" label-field-id="displayName"/>
                                <ctrl:show-modal page-id="patientsList" result-container-id="pats" width="42%"/>
                                <ctrl:update-model query-id="recepient_updModel" master-field-id="recipient.id" detail-field-id="rec.id" target="form"/>
                            </ctrl:classifier>
                        </fs:row>
                        <fs:row>
                            <ctrl:input-text id="recipient_fio" label=""
                                             control-style="width:450px;margin-top:-7px;" label-style="display:none;">
                                <ctrl:set-value-expression on="recipient">
                                    if ((typeof recipient != 'undefined')&amp;&amp;(recipient != null)&amp;&amp;(recipient.id != null)) (recipient.fullName); else throw '!'
                                </ctrl:set-value-expression>
                                <ctrl:description>фамилия, имя, отчество</ctrl:description>
                            </ctrl:input-text>
                        <!--</fs:row>-->
                        <!--<fs:row>-->
                            <ctrl:input-text id="recipient_doc" label=""
                                             control-style="width:450px;margin-top:-7px;"  label-style="display:none;">
                                <ctrl:description>(документ удостоверяющий личность получателя, серия, номер, кем выдан)</ctrl:description>
                            </ctrl:input-text>
                        </fs:row>
                    </fs:field-set>
                    <fs:field-set>
                        <ctrl:input-text id="org.id" visible="false" default-value="#{org.id?}"/>
                        <ctrl:input-text id="org_name" visible="false" default-value="#{org.name?}"/>
                        <ctrl:input-text id="receptionist.id" visible="false" default-value="#{emplPos.id?}"/>
                        <ctrl:input-text id="reseptionist" visible="false" default-value="#{emplPos.name?}"/>
                        <ctrl:input-text id="position" visible="false" default-value="#{pos.name?}"/>
                        <ctrl:input-text id="to_read" visible="false" default-value="false"/>
                    </fs:field-set>
                </wgt:form>
            </container>
            <container id="death_reason" depends-on="perinatal" opened="true" dependency-condition="(perinatal.to_read == false)">
            <wgt:table master-field-id="id" detail-field-id="certificate.id">
                <wgt:query-id>death_reason</wgt:query-id>
                <wgt:name>23. Причины перинатальной смерти</wgt:name>
                <wgt:columns>
                    <wgt:column column-field-id="orderAll.id" name="" width="15px"/>
                    <wgt:column column-field-id="name" name="Причина" width="400px"/>
                    <wgt:column column-field-id="length" name="Приблизительный период времени между началом патологического процесса и смертью" width="414px"/>
                    <wgt:column column-field-id="code" name="Код по МКБ-10" width="110px"/>
                </wgt:columns>
                <wgt:sortings>
                    <wgt:sorting sorting-field-id="orderAll.id" direction="ASC"/>
                </wgt:sortings>
                <wgt:action-menu>
                    <wgt:menu-item id="create" label="Добавить(Ins)" default="true" context="false" key="Insert">
                        <wgt:show-modal page-id="death_reason" master-field-id="certificate.id" detail-field-id="certificate.id"
                                        action-id="create" refresh-on-close="true" model="default"
                                        page-name="Добавить причину" create-more="false">
                            <wgt:pre-filters>
                                <wgt:pre-filter field-id="is_perinatal" value="true" type="eq"/>
                                <wgt:pre-filter field-id="is_I" value="false"/>
                            </wgt:pre-filters>
                        </wgt:show-modal>
                    </wgt:menu-item>
                    <!--<wgt:menu-item id="update" label="Изменить(Enter)" default="true" context="true" key="Enter">-->
                        <!--<wgt:show-modal page-id="death_reason" action-id="update"-->
                                        <!--page-name="Изменить ">-->
                            <!--<wgt:pre-filters>-->
                                <!--<wgt:pre-filter field-id="is_I" value="true"/>-->
                            <!--</wgt:pre-filters>-->
                        <!--</wgt:show-modal>-->
                    <!--</wgt:menu-item>-->
                    <!--<wgt:menu-item id="delete" label="Удалить(Del)" context="true" key="Delete">-->
                        <!--<wgt:invoke-action action-id="delete" confirmation="true"/>-->
                    <!--</wgt:menu-item>-->
                </wgt:action-menu>
            </wgt:table>
            <pre-filters>
                <pre-filter field-id="is_perinatal" value="true" type="eq"/>
                <pre-filter field-id="is_I" value="false"/>
            </pre-filters>
        </container>
        </region>
    </regions>
</page>
