<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-1.0"
      xmlns:ctrl="http://n2oapp.net/framework/config/schema/n2o-control-1.0"
      xmlns:wgt="http://n2oapp.net/framework/config/schema/n2o-widget-1.0"
      xmlns:fs="http://n2oapp.net/framework/config/schema/fieldset-1.0">
    <name>Рабочее место врача</name>
    <object-id>DispDoctorArms</object-id>
    <layout>n2o/layout/top-bottom</layout>
    <regions>
        <region place="top" type="none">
            <container id="main">
                <wgt:table src="n2o/widgets/custom/vac/table" customize="js">
                    <wgt:id>armsPatients</wgt:id>
                    <wgt:query-id>armsPatients</wgt:query-id>
                    <wgt:default-values-query-id></wgt:default-values-query-id>
                    <wgt:name>Список пациентов</wgt:name>
                    <wgt:filters>
                        <ctrl:classifier id="org" label="Организация" readonly="true">
                            <ctrl:query query-id="organization" value-field-id="id" label-field-id="short_name"/>
                            <ctrl:default-model>
                                <ctrl:value field-id="id">#{org.id?}</ctrl:value>
                                <ctrl:value field-id="short_name">#{org.name?}</ctrl:value>
                            </ctrl:default-model>
                        </ctrl:classifier>
                        <ctrl:classifier id="service" label="Вид услуги">
                            <ctrl:query query-id="serviceType" value-field-id="id" label-field-id="name">
                                <ctrl:pre-filters>
                                    <ctrl:pre-filter field-id="orgId" ref="org.id" />
                                </ctrl:pre-filters>
                            </ctrl:query>
                            <!--<ctrl:default-model>-->
                                <!--<ctrl:value field-id="id">14477</ctrl:value>-->
                                <!--<ctrl:value field-id="name">Посещение к участковому врачу-терапевту, участковому врачу-терапевту цехового врачебного участка, включая заведующего профильным отделением</ctrl:value>-->
                            <!--</ctrl:default-model>-->
                        </ctrl:classifier>
                        <ctrl:classifier id="resource" label="Ресурс" depends-on="org">
                            <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                <ctrl:pre-filters>
                                    <ctrl:pre-filter field-id="orgId" ref="org.id" />
                                    <ctrl:pre-filter field-id="srvTypeId" ref="service.id" />
                                </ctrl:pre-filters>
                            </ctrl:query>
                            <!--<ctrl:default-model>-->
                                <!--<ctrl:value field-id="id">4299693</ctrl:value>-->
                                <!--<ctrl:value field-id="srg_id">322200</ctrl:value>-->
                                <!--<ctrl:value field-id="name">Тестовый терапевт Коровина</ctrl:value>-->
                            <!--</ctrl:default-model>-->
                        </ctrl:classifier>
                        <ctrl:input-text id="fio"/>
                        <ctrl:date-time id="birthday"/>
                        <ctrl:classifier id="gender" label="Пол">
                            <ctrl:query query-id="dispGender" value-field-id="id" label-field-id="name"/>
                        </ctrl:classifier>
                        <ctrl:input-text id="ambCard"/>
                        <ctrl:input-text id="order_number"/>
                    </wgt:filters>
                    <wgt:columns>
                        <wgt:column column-field-id="fio" />
                        <wgt:column column-field-id="gender.name" />
                        <wgt:column column-field-id="birthday" />
                        <wgt:column column-field-id="oms" />
                        <wgt:column column-field-id="address" />
                        <wgt:column column-field-id="overview">
                            <wgt:color>
                                <wgt:switch value-field-id="overview_color">
                                    <wgt:case value="1">text-error</wgt:case>
                                    <wgt:case value="2">text-warning</wgt:case>
                                    <wgt:case value="3">text-success</wgt:case>
                                    <wgt:default>text-success</wgt:default>
                                </wgt:switch>
                            </wgt:color>
                        </wgt:column>
                    </wgt:columns>
                    <wgt:size>10</wgt:size>
                    <!--<wgt:action-menu>-->
                        <!--<wgt:menu-item label="Перейти на мероприятие" id="create" context="true" icon="icon-plus" type="icon">-->
                            <!--<wgt:a href="#$module.demo?moduleId=demo.demo&amp;pageId=EventsList/EventsList?EventsList:$active=1&amp;EventsList:$treeHistory=event_year_id:2014|:eventId:&amp;EventsList:$selectedId=:eventId:&amp;EventPatients:$active=1&amp;EventPatients:$selectedId=:indivId:" />-->
                        <!--</wgt:menu-item>-->
                    <!--</wgt:action-menu>-->
                </wgt:table>

            </container>
        </region>
        <region place="bottom" type="list">
            <container id="therapeutist" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.18'">
                <wgt:form detail-field-id="event_patient_id" master-field-id="id">
                    <wgt:id>disprCardRenderingServiceTherapeutist</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceTherapeutist</wgt:query-id>
                    <wgt:name>Прием терапевта</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:classifier id="main_diagnosis" label="Основной диагноз">
                                    <ctrl:query query-id="disprCardDiagnosisD" value-field-id="id" label-field-id="name"/>
                                </ctrl:classifier>
                                <ctrl:classifier id="other_diagnos_1" label="Сопутствующий диагноз">
                                    <ctrl:query query-id="disprCardDiagnosisD" value-field-id="id" label-field-id="name"/>
                                </ctrl:classifier>
                                <ctrl:classifier id="other_diagnos_2" label="Сопутствующий диагноз">
                                    <ctrl:query query-id="disprCardDiagnosisD" value-field-id="id" label-field-id="name"/>
                                </ctrl:classifier>
                                <ctrl:classifier id="disease" label="Характер заболевания">
                                    <ctrl:query query-id="disprCardDiagnosisDis" value-field-id="id" label-field-id="name"/>
                                    <ctrl:set-value-expression on="main_diagnosis" on-load="true" on-non-empty="true">
                                        if ((main_diagnosis!=null)&amp;&amp;(!main_diagnosis || typeof main_diagnosis.code!= 'undefined' )&amp;&amp;(main_diagnosis.code.indexOf('Z')==
                                        0))
                                        {var o = new Object(); o.id=parseInt(character); o.code = '40'; o.name = 'Прочее (для Z00-Z99)'; o;} else throw '!'
                                    </ctrl:set-value-expression>
                                </ctrl:classifier>
                                <ctrl:text-area id="counsel" label="Заключение" rows="2" />
                                <ctrl:text-area id="reference" label="Рекомендации" rows="2" />
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.18"/>
                </pre-filters>
            </container>
            <container id="neurologist" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.17'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceNeurologist</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceNeurologist</wgt:query-id>
                    <wgt:name>Прием невролога</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:classifier id="main_diagnosis" label="Основной диагноз">
                                    <ctrl:query query-id="disprCardDiagnosisD" value-field-id="id" label-field-id="name"/>
                                </ctrl:classifier>
                                <ctrl:classifier id="other_diagnosis_1" label="Сопутствующий диагноз">
                                    <ctrl:query query-id="disprCardDiagnosisD" value-field-id="id" label-field-id="name"/>
                                </ctrl:classifier>
                                <ctrl:classifier id="other_diagnosis_2" label="Сопутствующий диагноз">
                                    <ctrl:query query-id="disprCardDiagnosisD" value-field-id="id" label-field-id="name"/>
                                </ctrl:classifier>
                                <ctrl:classifier id="disease" label="Характер заболевания">
                                    <ctrl:query query-id="disprCardDiagnosisDis" value-field-id="id" label-field-id="name"/>
                                </ctrl:classifier>
                                <ctrl:text-area id="counsel" label="Заключение" rows="2" />
                                <ctrl:text-area id="reference" label="Рекомендации" rows="2" />
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.17"/>
                </pre-filters>
            </container>
            <container id="ArterialPressure" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.03'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceArterialPressure</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceArterialPressure</wgt:query-id>
                    <wgt:name>Артериальное давление</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:input-text id="systolic_ad" label="Систолическое АД (мм.рт.ст)" />
                                <ctrl:input-text id="diastolic_ad" label="Диастолическое АД" />
                                <ctrl:checkbox id="hypotensive_therapy" label="Гипотензивная терапия"/>
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.03"/>
                </pre-filters>
            </container>
            <container id="Cholesterol" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.05'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceCholesterol</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceCholesterol</wgt:query-id>
                    <wgt:name>Определение общего уровня холестерина в крови</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:input-text id="rate" label="Показатель (ммоль/л)" />
                                <ctrl:checkbox id="lipid_lowering_therapy" label="Гиполипидемическая терапия"/>
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.05"/>
                </pre-filters>
            </container>
            <container id="Glucose" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.06'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceGlucose</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceGlucose</wgt:query-id>
                    <wgt:name>Определение уровня глюкозы в крови</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:input-text id="rate" label="Показатель (ммоль/л)" />
                                <ctrl:checkbox id="hypoglycemic_therapy" label="Гипогликемическая терапия"/>
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.06"/>
                </pre-filters>
            </container>
            <container id="CardioRisk" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.07'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceCardioRisk</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceCardioRisk</wgt:query-id>
                    <wgt:name>Суммарный сердечно-сосудистый риск</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <!--<ctrl:input-text id="rate" label="Показатель (%)" />-->
                                <ctrl:custom label="Показатель (%):" id="rate" src="n2o/controls/custom/cardio/cardio" />
                                <ctrl:select id="risk_level" label="Уровень риска">
                                    <ctrl:options>
                                        <ctrl:option>{"id":1, "name":"Низкий"}</ctrl:option>
                                        <ctrl:option>{"id":2, "name":"Умеренный"}</ctrl:option>
                                        <ctrl:option>{"id":3, "name":"Высокий"}</ctrl:option>
                                        <ctrl:option>{"id":4, "name":"Очень высокий"}</ctrl:option>
                                    </ctrl:options>
                                    <ctrl:set-value-expression on="rate">
                                        <![CDATA[
                                        if ( parseInt(rate)  < 1 ){
                                            a = {id: 1, name: 'Низкий'};
                                        } else if ( parseInt(rate) >= 1 && parseInt(rate) < 5 ){
                                            a = {id: 2, name: 'Умеренный'};
                                        } else if ( parseInt(rate) >= 5 && parseInt(rate) < 10 ){
                                            a = {id: 3, name: 'Высокий'};
                                        } else if ( parseInt(rate) >= 10 ){
                                            a = {id: 4, name: 'Очень высокий'};
                                        }
                                        ]]>
                                    </ctrl:set-value-expression>
                                </ctrl:select>
                                <ctrl:checkbox id="pathology" label="Патология" >
                                    <ctrl:set-value-expression on="risk_level">
                                        if(risk_level.id==3 || risk_level.id==4) (true); else false;
                                    </ctrl:set-value-expression>
                                        </ctrl:checkbox>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.07"/>
                </pre-filters>
            </container>
            <container id="EKG" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.16'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceEKG</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceEKG</wgt:query-id>
                    <wgt:name>ЭКГ</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.16"/>
                </pre-filters>
            </container>
            <container id="MedicalAssistant" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.20'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceMedicalAssistant</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceMedicalAssistant</wgt:query-id>
                    <wgt:name>Осмотр фельдшера (акушерки)</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="oncology_suspicion" label="Онкоподозрение"/>
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.20"/>
                </pre-filters>
            </container>
            <container id="Fluorography" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.15'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceFluorography</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceFluorography</wgt:query-id>
                    <wgt:name>Флюорография</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="oncology_suspicion" label="Онкоподозрение"/>
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.15"/>
                </pre-filters>
            </container>
            <container id="Mammography" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.23'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceMammography</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceMammography</wgt:query-id>
                    <wgt:name>Маммография</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="oncology_suspicion" label="Онкоподозрение"/>
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.23"/>
                </pre-filters>
            </container>
            <container id="ClinicBlood" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.09'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceClinicBlood</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceClinicBlood</wgt:query-id>
                    <wgt:name>Клинический анализ крови</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.09"/>
                </pre-filters>
            </container>
            <container id="ClinicBloodAdv" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.10'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceClinicBloodAdv</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceClinicBloodAdv</wgt:query-id>
                    <wgt:name>Клинический анализ крови (развернутый)</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.10"/>
                </pre-filters>
            </container>
            <container id="BioBlood" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.12'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceBioBlood</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceBioBlood</wgt:query-id>
                    <wgt:name>Биохимический анализ крови</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.12"/>
                </pre-filters>
            </container>
            <container id="Urine" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.11'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceUrine</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceUrine</wgt:query-id>
                    <wgt:name>Общий анализ мочи</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.11"/>
                </pre-filters>
            </container>
            <container id="Excrement" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.13'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceExcrement</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceExcrement</wgt:query-id>
                    <wgt:name>Кал на скрытую кровь</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.13"/>
                </pre-filters>
            </container>
            <container id="ProstateAntigen" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.22'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceProstateAntigen</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceProstateAntigen</wgt:query-id>
                    <wgt:name>Простатспецифический антиген</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:input-text id="rate" label="Показатель (мг/мл)" />
                                <ctrl:checkbox id="oncology_suspicion" label="Онкоподозрение"/>
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.22"/>
                </pre-filters>
            </container>
            <container id="Ultrasound" depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.14'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceUltrasound</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceUltrasound</wgt:query-id>
                    <wgt:name>УЗИ органов брюшной полости</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <!--<ctrl:input-text id="rate" label="Показатель (мг/мл)" />-->
                                <ctrl:checkbox id="oncology_suspicion" label="Онкоподозрение"/>
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.14"/>
                </pre-filters>
            </container>
            <container id="IntraocularPressure"  depends-on="main" opened="true" dependency-condition="main.service_code == 'Д1.08'">
                <wgt:form master-field-id="id" detail-field-id="event_patient_id">
                    <wgt:id>disprCardRenderingServiceIntraocularPressure</wgt:id>
                    <wgt:query-id>disprCardRenderingServiceIntraocularPressure</wgt:query-id>
                    <wgt:name>Внутриглазное давление</wgt:name>
                    <wgt:grid>
                        <wgt:column>
                            <fs:field-set header="none" inline="true" field-label-location="top">
                                <ctrl:classifier id="resource" label="Ресурс">
                                    <ctrl:query query-id="resourceGroupService" value-field-id="id" label-field-id="name">
                                        <ctrl:pre-filters>
                                            <ctrl:pre-filter field-id="orgId" ref="org_id"/>
                                            <ctrl:pre-filter field-id="srvTypeId" ref="service_type_id"/>
                                        </ctrl:pre-filters>
                                    </ctrl:query>
                                </ctrl:classifier>
                                <ctrl:date-time id="date" label="Дата" />
                                <ctrl:input-text id="rate_left" label="Левый" />
                                <ctrl:input-text id="rate_right" label="Правый" />
                                <ctrl:checkbox id="pathology" label="Патология"/>
                                <ctrl:hidden id="service_type_id" />
                            </fs:field-set>
                        </wgt:column>
                    </wgt:grid>
                    <wgt:action-menu>
                        <wgt:menu-item label="Заполнить данные" id="update" type="textAndIcon" icon="icon-edit">
                            <wgt:go-edit action-id="update" />
                        </wgt:menu-item>
                    </wgt:action-menu>
                </wgt:form>
                <pre-filters>
                    <pre-filter field-id="service_code" value="Д1.08"/>
                </pre-filters>
            </container>
        </region>
    </regions>
</page>